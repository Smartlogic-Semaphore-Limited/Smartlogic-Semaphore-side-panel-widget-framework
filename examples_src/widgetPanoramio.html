<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <title>Simple widget panoriamio</title>
  <!-- grunt embed task will embed content of workbench-widget-api.min.js into html -->
  <script
    src="workbench-widget-api.min.js" data-embed></script>
  <script src="//code.jquery.com/jquery-2.2.1.min.js"></script>
  <script
    src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
        integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
        crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
        integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r"
        crossorigin="anonymous">

  <link rel="stylesheet"
        href="https://bootswatch.com/lumen/bootstrap.min.css">
  <!-- Latest compiled and minified JavaScript -->
  <script
    src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
    integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
    crossorigin="anonymous"></script>

</head>

<body>

<script>
  var api = new WorkbenchWidgetApi();

  api.getStateParams().then(function (data) {
    api.getConceptDetails(data.taskGraphUri, data.itemUri).then(function (concept) {
      var conceptName = concept["meta:displayName"]["@value"];
      $("#iframe").attr("src", "http://www.panoramio.com/wapi/template/list.html?tag=" + conceptName + "&amp;width=400&amp;height=200&amp;columns=6&amp;rows=3&amp;orientation=horizontal");
    })
  });

  function openWidget(widgetId) {
    api.openWidget(widgetId);
  }

  function closeWidget() {
    api.closeWidget();
  }

</script>

<header class="header bg-info">

  <div class="row">

    <div class="col-xs-10">

      <p class="m-t"></p>

    </div>

    <div class="col-xs-2 text-right">

      <button class="close m-t" uib-tooltip="Close" tooltip-placement="bottom"
              onclick="closeWidget()">Ã—
      </button>

    </div>

  </div>

</header>

<h1>Panoramio widget example</h1>

<button onclick="openWidget('http://myCompany.com/#WidgetWikipedia')"
        class="btn btn-xs">Open widget 'Wikipedia'
</button>
<button onclick="openWidget('http://myCompany.com/#WidgetApi')"
        class="btn btn-xs">Open widget 'Api'
</button>

<iframe id="iframe" width="100%" border="0" height="100%"></iframe>

</body>

</html>

